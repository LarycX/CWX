{"version":3,"file":"morse-code-translator.umd.js","sources":["../src/characters.ts","../src/options.ts","../src/audio.ts","../src/index.ts"],"sourcesContent":["import type { Characters, Options } from './types.js';\n\nconst baseCharacters: Characters = {\n  '1': { // Latin => https://en.wikipedia.org/wiki/Morse_code\n    'A': '01', 'B': '1000', 'C': '1010', 'D': '100', 'E': '0', 'F': '0010',\n    'G': '110', 'H': '0000', 'I': '00', 'J': '0111', 'K': '101', 'L': '0100',\n    'M': '11', 'N': '10', 'O': '111', 'P': '0110', 'Q': '1101', 'R': '010',\n    'S': '000', 'T': '1', 'U': '001', 'V': '0001', 'W': '011', 'X': '1001',\n    'Y': '1011', 'Z': '1100'\n  },\n  '2': { // Numbers\n    '0': '11111', '1': '01111', '2': '00111', '3': '00011', '4': '00001',\n    '5': '00000', '6': '10000', '7': '11000', '8': '11100', '9': '11110'\n  },\n  '3': { // Punctuation\n    '.': '010101', ',': '110011', '?': '001100', '\\'': '011110', '!': '101011', '/': '10010',\n    '(': '10110', ')': '101101', '&': '01000', ':': '111000', ';': '101010', '=': '10001',\n    '+': '01010', '-': '100001', '_': '001101', '\"': '010010', '$': '0001001', '@': '011010',\n    '¿': '00101', '¡': '110001'\n  },\n  '4': { // Latin Extended => https://ham.stackexchange.com/questions/1379/international-characters-in-morse-code\n    'Ã': '01101', 'Á': '01101', 'Å': '01101', 'À': '01101', 'Â': '01101', 'Ä': '0101',\n    'Ą': '0101', 'Æ': '0101', 'Ç': '10100', 'Ć': '10100', 'Ĉ': '10100', 'Č': '110',\n    'Ð': '00110', 'È': '01001', 'Ę': '00100', 'Ë': '00100', 'É': '00100',\n    'Ê': '10010', 'Ğ': '11010', 'Ĝ': '11010', 'Ĥ': '1111', 'İ': '01001', 'Ï': '10011',\n    'Ì': '01110', 'Ĵ': '01110', 'Ł': '01001', 'Ń': '11011', 'Ñ': '11011', 'Ó': '1110',\n    'Ò': '1110', 'Ö': '1110', 'Ô': '1110', 'Ø': '1110', 'Ś': '0001000', 'Ş': '01100',\n    'Ș': '1111', 'Š': '1111', 'Ŝ': '00010', 'ß': '000000', 'Þ': '01100', 'Ü': '0011',\n    'Ù': '0011', 'Ŭ': '0011', 'Ž': '11001', 'Ź': '110010', 'Ż': '11001'\n  },\n  '5': { // Cyrillic Alphabet => https://en.wikipedia.org/wiki/Russian_Morse_code\n    'А': '01', 'Б': '1000', 'В': '011', 'Г': '110', 'Д': '100', 'Е': '0',\n    'Ж': '0001', 'З': '1100', 'И': '00', 'Й': '0111', 'К': '101', 'Л': '0100',\n    'М': '11', 'Н': '10', 'О': '111', 'П': '0110', 'Р': '010', 'С': '000',\n    'Т': '1', 'У': '001', 'Ф': '0010', 'Х': '0000', 'Ц': '1010', 'Ч': '1110',\n    'Ш': '1111', 'Щ': '1101', 'Ъ': '11011', 'Ы': '1011', 'Ь': '1001', 'Э': '00100',\n    'Ю': '0011', 'Я': '0101', 'Ї': '01110', 'Є': '00100', 'І': '00', 'Ґ': '110'\n  },\n  '6': { // Greek Alphabet => https://en.wikipedia.org/wiki/Morse_code_for_non-Latin_alphabets\n    'Α': '01', 'Β': '1000', 'Γ': '110', 'Δ': '100', 'Ε': '0', 'Ζ': '1100',\n    'Η': '0000', 'Θ': '1010', 'Ι': '00', 'Κ': '101', 'Λ': '0100', 'Μ': '11',\n    'Ν': '10', 'Ξ': '1001', 'Ο': '111', 'Π': '0110', 'Ρ': '010', 'Σ': '000',\n    'Τ': '1', 'Υ': '1011', 'Φ': '0010', 'Χ': '1111', 'Ψ': '1101', 'Ω': '011'\n  },\n  '7': { // Hebrew Alphabet => https://en.wikipedia.org/wiki/Morse_code_for_non-Latin_alphabets\n    'א': '01', 'ב': '1000', 'ג': '110', 'ד': '100', 'ה': '111', 'ו': '0',\n    'ז': '1100', 'ח': '0000', 'ט': '001', 'י': '00', 'כ': '101', 'ל': '0100',\n    'מ': '11', 'נ': '10', 'ס': '1010', 'ע': '0111', 'פ': '0110', 'צ': '011',\n    'ק': '1101', 'ר': '010', 'ש': '000', 'ת': '1'\n  },\n  '8': { // Arabic Alphabet => https://en.wikipedia.org/wiki/Morse_code_for_non-Latin_alphabets\n    'ا': '01', 'ب': '1000', 'ت': '1', 'ث': '1010', 'ج': '0111', 'ح': '0000',\n    'خ': '111', 'د': '100', 'ذ': '1100', 'ر': '010', 'ز': '1110', 'س': '000',\n    'ش': '1111', 'ص': '1001', 'ض': '0001', 'ط': '001', 'ظ': '1011', 'ع': '0101',\n    'غ': '110', 'ف': '0010', 'ق': '1101', 'ك': '101', 'ل': '0100', 'م': '11',\n    'ن': '10', 'ه': '00100', 'و': '011', 'ي': '00', 'ﺀ': '0'\n  },\n  '9': { // Persian Alphabet => https://en.wikipedia.org/wiki/Morse_code_for_non-Latin_alphabets\n    'ا': '01', 'ب': '1000', 'پ': '0110', 'ت': '1', 'ث': '1010', 'ج': '0111',\n    'چ': '1110', 'ح': '0000', 'خ': '1001', 'د': '100', 'ذ': '0001', 'ر': '010',\n    'ز': '1100', 'ژ': '110', 'س': '000', 'ش': '1111', 'ص': '0101', 'ض': '00100',\n    'ط': '001', 'ظ': '1011', 'ع': '111', 'غ': '0011', 'ف': '0010', 'ق': '111000',\n    'ک': '101', 'گ': '1101', 'ل': '0100', 'م': '11', 'ن': '10', 'و': '011',\n    'ه': '0', 'ی': '00'\n  },\n  '10': { // Japanese Alphabet => https://ja.wikipedia.org/wiki/%E3%83%A2%E3%83%BC%E3%83%AB%E3%82%B9%E7%AC%A6%E5%8F%B7#%E5%92%8C%E6%96%87%E3%83%A2%E3%83%BC%E3%83%AB%E3%82%B9%E7%AC%A6%E5%8F%B7\n    'ア': '11011', 'カ': '0100', 'サ': '10101', 'タ': '10', 'ナ': '010', 'ハ': '1000',\n    'マ': '1001', 'ヤ': '011', 'ラ': '000', 'ワ': '101', 'イ': '01', 'キ': '10100',\n    'シ': '11010', 'チ': '0010', 'ニ': '1010', 'ヒ': '11001', 'ミ': '00101', 'リ': '110',\n    'ヰ': '01001', 'ウ': '001', 'ク': '0001', 'ス': '11101', 'ツ': '0110', 'ヌ': '0000',\n    'フ': '1100', 'ム': '1', 'ユ': '10011', 'ル': '10110', 'ン': '01010', 'エ': '10111',\n    'ケ': '1011', 'セ': '01110', 'テ': '01011', 'ネ': '1101', 'ヘ': '0', 'メ': '10001',\n    'レ': '111', 'ヱ': '01100', 'オ': '01000', 'コ': '1111', 'ソ': '1110', 'ト': '00100',\n    'ノ': '0011', 'ホ': '100', 'モ': '10010', 'ヨ': '11', 'ロ': '0101', 'ヲ': '0111',\n    '゛': '00', '゜': '00110', '。': '010100', 'ー': '01101', '、': '010101',\n    '（': '101101', '）': '010010'\n  },\n  '11': { // Korean Alphabet => https://ko.wikipedia.org/wiki/%EB%AA%A8%EC%8A%A4_%EB%B6%80%ED%98%B8\n    'ㄱ': '0100', 'ㄴ': '0010', 'ㄷ': '1000', 'ㄹ': '0001', 'ㅁ': '11', 'ㅂ': '011',\n    'ㅅ': '110', 'ㅇ': '101', 'ㅈ': '0110', 'ㅊ': '1010', 'ㅋ': '1001', 'ㅌ': '1100',\n    'ㅍ': '111', 'ㅎ': '0111', 'ㅏ': '0', 'ㅑ': '00', 'ㅓ': '1', 'ㅕ': '000',\n    'ㅗ': '01', 'ㅛ': '10', 'ㅜ': '0000', 'ㅠ': '010', 'ㅡ': '100', 'ㅣ': '001',\n    'ㅐ': '1101', 'ㅔ': '1011'\n  },\n  '12': { // Thai Alphabet => https://th.wikipedia.org/wiki/รหัสมอร์ส\n    'ก': '110', 'ข': '1010', 'ค': '101', 'ง': '10110', 'จ': '10010',\n    'ฉ': '1111', 'ช': '1001', 'ซ': '1100', 'ญ': '0111', 'ด': '100',\n    'ต': '1', 'ถ': '10100', 'ท': '10011', 'น': '10', 'บ': '1000',\n    'ป': '0110', 'ผ': '1101', 'ฝ': '10101', 'พ': '01100', 'ฟ': '0010',\n    'ม': '11', 'ย': '1011', 'ร': '010', 'ล': '0100', 'ว': '011',\n    'ส': '000', 'ห': '0000', 'อ': '10001', 'ฮ': '11011', 'ฤ': '01011',\n    'ะ': '01000', 'า': '01', 'ิ': '00100', 'ี': '00', 'ึ': '00110',\n    'ื': '0011', 'ุ': '00101', 'ู': '1110', 'เ': '0', 'แ': '0101',\n    'ไ': '01001', 'โ': '111', 'ำ': '00010', '่': '001', '้': '0001',\n    '๊': '11000', '๋': '01010', 'ั': '01101', '็': '11100', '์': '11001',\n    'ๆ': '10111', 'ฯ': '11010'\n  }\n};\n\nconst getCharacters = (options: Options) => ({\n  ...baseCharacters,\n  '0': baseCharacters[options.priority],\n  '1': {\n    ...baseCharacters['1'],\n    [options.separator]: options.space\n  }\n});\n\nconst getMappedCharacters = (options: Options, usePriority: boolean) => {\n  const mapped: Characters = {};\n  const characters = getCharacters(options);\n  for (const set in characters) {\n    mapped[set] = {};\n    const charSet = characters[set as keyof typeof characters];\n    if (charSet) {\n      for (const key in charSet) {\n        mapped[set][key] = charSet[key].replace(/0/g, options.dot).replace(/1/g, options.dash);\n      }\n    }\n  }\n  if (!usePriority) {\n    delete mapped['0'];\n  }\n  return mapped;\n};\n\nconst swapCharacters = (options: Options) => {\n  const swapped: Record<string, string> = {};\n  const mappedCharacters = getMappedCharacters(options, true);\n  for (const set in mappedCharacters) {\n    for (const key in mappedCharacters[set]) {\n      if (typeof swapped[mappedCharacters[set][key]] === 'undefined') {\n        swapped[mappedCharacters[set][key]] = key;\n      }\n    }\n  }\n  return swapped;\n};\n\nexport {\n  getCharacters,\n  getMappedCharacters,\n  swapCharacters\n};\n","import type { Options } from './types.js';\n\nconst getOptions = (opts: Partial<Options> = {}): Options => {\n  const options: Options = {\n    ...opts,\n    dash: opts.dash || '-',\n    dot: opts.dot || '.',\n    space: opts.space || '/',\n    separator: opts.separator || ' ',\n    invalid: opts.invalid || '#',\n    priority: opts.priority || 1,\n    wpm: opts.wpm, // words per minute - PARIS method used in favour of unit/fwUnit options\n    unit: opts.unit || 0.08, // period of one unit, in seconds, 1.2 / c where c is speed of transmission, in words per minute\n    fwUnit: opts.fwUnit || opts.unit || 0.08, // Farnsworth unit to control intercharacter and interword gaps\n    volume: opts.volume || 100,\n    oscillator: {\n      ...opts.oscillator,\n      type: opts.oscillator?.type || 'sine', // sine, square, sawtooth, triangle\n      frequency: opts.oscillator?.frequency || 500, // value in hertz\n      onended: opts.oscillator?.onended || null // event that fires when the tone has stopped playing\n    }\n  };\n  return options;\n};\n\nexport default getOptions;\n","import type { Options, AudioResult, AudioState, AudioEvents } from './types.js';\n\n// Audio constants\nconst SAMPLE_RATE = 44100;\nconst CHANNELS = 1;\nconst BITS_PER_SAMPLE = 16;\n\n// Morse timing constants (in units)\nconst DOT_DURATION = 1;\nconst DASH_DURATION = 3;\nconst INTRA_CHARACTER_GAP = 1;\nconst INTER_CHARACTER_GAP = 3;\nconst WORD_GAP = 7;\n\n// WPM calculation constant (PARIS method)\nconst WPM_UNIT_DIVISOR = 50;\n\ntype GainTiming = [number, number];\ntype GainTimings = [GainTiming[], number];\n\nconst getGainTimings = (morse: string, opts: Options, currentTime = 0): GainTimings => {\n  const timings: GainTiming[] = [];\n  let { unit, fwUnit } = opts;\n  let time = 0;\n\n  if (opts.wpm) {\n    // WPM mode uses standardized units (PARIS method)\n    unit = fwUnit = 60 / (opts.wpm * WPM_UNIT_DIVISOR);\n  }\n\n  timings.push([0, time]);\n\n  const addTiming = (gainValue: number, duration: number, useUnit = true) => {\n    timings.push([gainValue, currentTime + time]);\n    time += duration * (useUnit ? unit : fwUnit);\n  };\n\n  const tone = (duration: number) => addTiming(opts.volume / 100.0, duration);\n  const silence = (duration: number) => addTiming(0, duration);\n  const gap = (duration: number) => addTiming(0, duration, false);\n\n  for (let i = 0, needsSilence = false; i <= morse.length; i++) {\n    const char = morse[i];\n    const nextChar = morse[i + 1];\n    const prevChar = morse[i - 1];\n\n    if (char === opts.space) {\n      gap(WORD_GAP);\n      needsSilence = false;\n    } else if (char === opts.dot) {\n      if (needsSilence) silence(INTRA_CHARACTER_GAP);\n      tone(DOT_DURATION);\n      needsSilence = true;\n    } else if (char === opts.dash) {\n      if (needsSilence) silence(INTRA_CHARACTER_GAP);\n      tone(DASH_DURATION);\n      needsSilence = true;\n    } else if (\n      nextChar !== undefined && nextChar !== opts.space &&\n      prevChar !== undefined && prevChar !== opts.space\n    ) {\n      // Inter-character gap (separator between characters)\n      gap(INTER_CHARACTER_GAP);\n      needsSilence = false;\n    }\n  }\n\n  return [timings, time];\n};\n\n/**\n * Encodes audio samples to WAV format\n * Based on: https://github.com/mattdiamond/Recorderjs/blob/master/src/recorder.js#L155\n */\nconst encodeWAV = (sampleRate: number, samples: Float32Array): DataView => {\n  const bytesPerSample = BITS_PER_SAMPLE / 8;\n  const blockAlign = CHANNELS * bytesPerSample;\n  const byteRate = sampleRate * blockAlign;\n  const dataSize = samples.length * bytesPerSample;\n  const bufferSize = 44 + dataSize; // WAV header is 44 bytes\n\n  const buffer = new ArrayBuffer(bufferSize);\n  const view = new DataView(buffer);\n\n  const writeString = (offset: number, text: string) => {\n    for (let i = 0; i < text.length; i++) {\n      view.setUint8(offset + i, text.charCodeAt(i));\n    }\n  };\n\n  const floatTo16BitPCM = (offset: number, input: Float32Array) => {\n    for (let i = 0; i < input.length; i++, offset += bytesPerSample) {\n      const sample = Math.max(-1, Math.min(1, input[i]));\n      const value = sample < 0 ? sample * 0x8000 : sample * 0x7FFF;\n      view.setInt16(offset, value, true);\n    }\n  };\n\n  // RIFF chunk descriptor\n  writeString(0, 'RIFF');\n  view.setUint32(4, bufferSize - 8, true); // File size - 8\n  writeString(8, 'WAVE');\n\n  // fmt sub-chunk\n  writeString(12, 'fmt ');\n  view.setUint32(16, 16, true); // Subchunk1Size (16 for PCM)\n  view.setUint16(20, 1, true); // AudioFormat (1 = PCM)\n  view.setUint16(22, CHANNELS, true);\n  view.setUint32(24, sampleRate, true);\n  view.setUint32(28, byteRate, true);\n  view.setUint16(32, blockAlign, true);\n  view.setUint16(34, BITS_PER_SAMPLE, true);\n\n  // data sub-chunk\n  writeString(36, 'data');\n  view.setUint32(40, dataSize, true);\n  floatTo16BitPCM(44, samples);\n\n  return view;\n};\n\nconst audio = (morse: string, options: Options): AudioResult => {\n  const AudioContextClass = window.AudioContext || (window as any).webkitAudioContext;\n  const OfflineAudioContextClass = window.OfflineAudioContext || (window as any).webkitOfflineAudioContext;\n\n  if (!AudioContextClass || !OfflineAudioContextClass) {\n    throw new Error('Web Audio API is not supported in this browser. Please use a modern browser with Web Audio API support.');\n  }\n\n  const context = new AudioContextClass();\n  const [gainValues, totalTime] = getGainTimings(morse, options);\n  const bufferLength = Math.ceil(SAMPLE_RATE * totalTime);\n  const offlineContext = new OfflineAudioContextClass(CHANNELS, bufferLength, SAMPLE_RATE);\n\n  const oscillator = offlineContext.createOscillator();\n  const gainNode = offlineContext.createGain();\n\n  oscillator.type = options.oscillator.type as OscillatorType;\n  oscillator.frequency.value = options.oscillator.frequency ?? 500;\n\n  gainValues.forEach(([value, time]) => {\n    gainNode.gain.setValueAtTime(value, time);\n  });\n\n  oscillator.connect(gainNode);\n  gainNode.connect(offlineContext.destination);\n\n  // State management\n  let source: AudioBufferSourceNode | null = null;\n  let renderedBuffer: AudioBuffer | null = null;\n  let state: AudioState = 'ready';\n  let pausedAt = 0;\n  let startTime = 0;\n  let timeout: number | null = null;\n\n  const events: AudioEvents = options.events || {};\n\n  // Backwards compatibility: support old onended in oscillator options\n  if (options.oscillator.onended && !events.onended) {\n    events.onended = options.oscillator.onended as any;\n  }\n\n  // Render the audio buffer\n  const render = new Promise<void>((resolve, reject) => {\n    oscillator.start(0);\n    offlineContext.startRendering();\n    offlineContext.oncomplete = (e) => {\n      try {\n        renderedBuffer = e.renderedBuffer;\n        state = 'ready';\n        events.onready?.();\n        resolve();\n      } catch (err) {\n        reject(err);\n      }\n    };\n    offlineContext.addEventListener('error', (err) => {\n      reject(err);\n    });\n  });\n\n  // Helper: Create a new audio source\n  const createSource = (): AudioBufferSourceNode => {\n    const newSource = context.createBufferSource();\n    newSource.buffer = renderedBuffer;\n    newSource.connect(context.destination);\n    newSource.onended = () => {\n      const currentTime = getCurrentTime();\n      // Only fire onended if playback completed naturally (not stopped/paused)\n      if (state === 'playing' && currentTime >= totalTime - 0.01) {\n        state = 'stopped';\n        pausedAt = 0;\n        events.onended?.();\n      }\n    };\n    return newSource;\n  };\n\n  const play = async () => {\n    await render;\n\n    // Resume audio context if suspended\n    if (context.state === 'suspended') {\n      await context.resume();\n    }\n\n    // If already playing, do nothing\n    if (state === 'playing') {\n      return;\n    }\n\n    // Create new source if needed\n    if (!source || source.buffer === null) {\n      source = createSource();\n    }\n\n    // Start playback from pausedAt position\n    source.start(context.currentTime, pausedAt);\n    startTime = context.currentTime - pausedAt;\n    state = 'playing';\n    events.onstarted?.();\n\n    // Set up auto-stop when playback completes\n    const remainingTime = (totalTime - pausedAt) * 1000;\n    timeout = window.setTimeout(() => {\n      if (state === 'playing') {\n        stop();\n      }\n    }, remainingTime);\n  };\n\n  const pause = () => {\n    if (state !== 'playing') {\n      return;\n    }\n\n    if (timeout !== null) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n\n    pausedAt = Math.min(context.currentTime - startTime, totalTime);\n\n    if (source) {\n      source.stop(0);\n      source = null;\n    }\n\n    state = 'paused';\n    events.onpaused?.();\n  };\n\n  const stop = (dispose = false) => {\n    if (timeout !== null) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n\n    if (source) {\n      try {\n        source.stop(0);\n      } catch (e) {\n        // Ignore if already stopped\n      }\n      source = null;\n    }\n\n    const wasPlaying = state === 'playing';\n    state = 'stopped';\n    pausedAt = 0;\n    startTime = 0;\n\n    if (wasPlaying) {\n      events.onstopped?.();\n    }\n\n    if (dispose) {\n      renderedBuffer = null;\n    }\n  };\n\n  const seek = async (time: number) => {\n    const wasPlaying = state === 'playing';\n    const clampedTime = Math.max(0, Math.min(time, totalTime));\n\n    // Stop current playback\n    if (source) {\n      if (timeout !== null) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      try {\n        source.stop(0);\n      } catch (e) {\n        // Ignore\n      }\n      source = null;\n    }\n\n    pausedAt = clampedTime;\n    events.onseeked?.(clampedTime);\n\n    // Resume playback if was playing\n    if (wasPlaying) {\n      state = 'paused'; // Set to paused so play() will work\n      await play();\n    }\n  };\n\n  const dispose = () => {\n    stop(true);\n    if (context.state !== 'closed') {\n      context.close();\n    }\n  };\n\n  const getCurrentTime = (): number => {\n    if (state === 'playing') {\n      return Math.min(context.currentTime - startTime, totalTime);\n    }\n    return pausedAt;\n  };\n\n  const getTotalTime = (): number => {\n    return totalTime;\n  };\n\n  const getState = (): AudioState => {\n    return state;\n  };\n\n  const getWaveBlob = async (): Promise<Blob> => {\n    await render;\n    if (!renderedBuffer) {\n      throw new Error('Audio buffer not available');\n    }\n    const waveData = encodeWAV(offlineContext.sampleRate, renderedBuffer.getChannelData(0));\n    // Create a proper Uint8Array copy for Blob\n    const uint8Array = new Uint8Array(waveData.byteLength);\n    for (let i = 0; i < waveData.byteLength; i++) {\n      uint8Array[i] = waveData.getUint8(i);\n    }\n    return new Blob([uint8Array], { type: 'audio/wav' });\n  };\n\n  const getWaveUrl = async () => {\n    const audioBlob = await getWaveBlob();\n    return URL.createObjectURL(audioBlob);\n  };\n\n  const exportWave = async (filename: string = 'morse.wav') => {\n    const waveUrl = await getWaveUrl();\n    const anchor = document.createElement('a');\n    anchor.href = waveUrl;\n    anchor.target = '_blank';\n    anchor.download = filename;\n    anchor.click();\n  };\n\n  return {\n    // Playback control\n    play,\n    pause,\n    stop,\n    seek,\n    dispose,\n\n    // Playback information\n    getCurrentTime,\n    getTotalTime,\n    getState,\n\n    // Export functionality\n    getWaveBlob,\n    getWaveUrl,\n    exportWave,\n\n    // Context access (for advanced users)\n    context,\n    oscillator,\n    gainNode,\n  };\n};\n\nexport default audio;\n","import { getCharacters, getMappedCharacters, swapCharacters } from './characters.js';\nimport getOptions from './options.js';\nimport getAudio from './audio.js';\nimport type { Options, Characters, AudioResult } from './types.js';\n\nexport const encode = (text: string, opts?: Partial<Options>): string => {\n  const options = getOptions(opts);\n  const characters = getCharacters(options);\n  return [...text.replace(/\\s+/g, options.separator).trim().toLocaleUpperCase()]\n    .map((character) => {\n      for (const set in characters) {\n        const charSet = characters[set as keyof typeof characters];\n        if (charSet && charSet[character]) {\n          return charSet[character];\n        }\n      }\n      return options.invalid;\n    })\n    .join(options.separator)\n    .replace(/0/g, options.dot)\n    .replace(/1/g, options.dash);\n};\n\nexport const decode = (morse: string, opts?: Partial<Options>): string => {\n  const options = getOptions(opts);\n  const swapped = swapCharacters(options);\n  return morse\n    .replace(/\\s+/g, options.separator)\n    .trim()\n    .split(options.separator)\n    .map((characters) => {\n      if (typeof swapped[characters] !== 'undefined') {\n        return swapped[characters];\n      }\n      return options.invalid;\n    })\n    .join('');\n};\n\nexport const characters = (options?: Partial<Options>, usePriority: boolean = false): Characters => {\n  return getMappedCharacters(getOptions(options), usePriority);\n};\n\nexport const audio = (text: string, opts?: Partial<Options>, morseString?: string): AudioResult => {\n  const morse = morseString || encode(text, opts);\n  const options = getOptions(opts);\n  return getAudio(morse, options);\n};\n\n// Export types\nexport type { Options, Characters, AudioResult, Oscillator, AudioState, AudioEvents } from './types.js';\n\nexport default {\n  encode,\n  decode,\n  characters,\n  audio,\n};\n"],"names":["baseCharacters","getCharacters","options","getMappedCharacters","usePriority","mapped","characters","set","charSet","key","swapCharacters","swapped","mappedCharacters","getOptions","opts","SAMPLE_RATE","CHANNELS","BITS_PER_SAMPLE","DOT_DURATION","DASH_DURATION","INTRA_CHARACTER_GAP","INTER_CHARACTER_GAP","WORD_GAP","WPM_UNIT_DIVISOR","getGainTimings","morse","currentTime","timings","unit","fwUnit","time","addTiming","gainValue","duration","useUnit","tone","silence","gap","i","needsSilence","char","nextChar","prevChar","encodeWAV","sampleRate","samples","bytesPerSample","blockAlign","byteRate","dataSize","bufferSize","buffer","view","writeString","offset","text","floatTo16BitPCM","input","sample","value","audio","AudioContextClass","OfflineAudioContextClass","context","gainValues","totalTime","bufferLength","offlineContext","oscillator","gainNode","source","renderedBuffer","state","pausedAt","startTime","timeout","events","render","resolve","reject","e","err","createSource","newSource","getCurrentTime","play","remainingTime","stop","pause","dispose","wasPlaying","seek","clampedTime","getTotalTime","getState","getWaveBlob","waveData","uint8Array","getWaveUrl","audioBlob","filename","waveUrl","anchor","encode","character","decode","morseString","getAudio","index"],"mappings":"4OAEA,MAAMA,EAA6B,CACjC,EAAK,CACH,EAAK,KAAM,EAAK,OAAQ,EAAK,OAAQ,EAAK,MAAO,EAAK,IAAK,EAAK,OAChE,EAAK,MAAO,EAAK,OAAQ,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,OAClE,EAAK,KAAM,EAAK,KAAM,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,MACjE,EAAK,MAAO,EAAK,IAAK,EAAK,MAAO,EAAK,OAAQ,EAAK,MAAO,EAAK,OAChE,EAAK,OAAQ,EAAK,MAAA,EAEpB,EAAK,CACH,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAC7D,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,OAAA,EAE/D,EAAK,CACH,IAAK,SAAU,IAAK,SAAU,IAAK,SAAU,IAAM,SAAU,IAAK,SAAU,IAAK,QACjF,IAAK,QAAS,IAAK,SAAU,IAAK,QAAS,IAAK,SAAU,IAAK,SAAU,IAAK,QAC9E,IAAK,QAAS,IAAK,SAAU,EAAK,SAAU,IAAK,SAAU,EAAK,UAAW,IAAK,SAChF,IAAK,QAAS,IAAK,QAAA,EAErB,EAAK,CACH,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,OAC3E,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,MACzE,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAC7D,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,OAAQ,EAAK,QAAS,EAAK,QAC1E,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,OAC3E,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,UAAW,EAAK,QACzE,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,SAAU,EAAK,QAAS,EAAK,OAC1E,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,SAAU,EAAK,OAAA,EAE9D,EAAK,CACH,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,MAAO,EAAK,IACjE,EAAK,OAAQ,EAAK,OAAQ,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,OACnE,EAAK,KAAM,EAAK,KAAM,EAAK,MAAO,EAAK,OAAQ,EAAK,MAAO,EAAK,MAChE,EAAK,IAAK,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAClE,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,OAAQ,EAAK,OAAQ,EAAK,QACvE,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,QAAS,EAAK,KAAM,EAAK,KAAA,EAExE,EAAK,CACH,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,IAAK,EAAK,OAC/D,EAAK,OAAQ,EAAK,OAAQ,EAAK,KAAM,EAAK,MAAO,EAAK,OAAQ,EAAK,KACnE,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,MAAO,EAAK,MAClE,EAAK,IAAK,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,KAAA,EAErE,EAAK,CACH,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,MAAO,EAAK,IACjE,EAAK,OAAQ,EAAK,OAAQ,EAAK,MAAO,EAAK,KAAM,EAAK,MAAO,EAAK,OAClE,EAAK,KAAM,EAAK,KAAM,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,MAClE,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,GAAA,EAE5C,EAAK,CACH,EAAK,KAAM,EAAK,OAAQ,EAAK,IAAK,EAAK,OAAQ,EAAK,OAAQ,EAAK,OACjE,EAAK,MAAO,EAAK,MAAO,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,MACnE,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,OACrE,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,KACpE,EAAK,KAAM,EAAK,QAAS,EAAK,MAAO,EAAK,KAAM,EAAK,GAAA,EAEvD,EAAK,CACH,EAAK,KAAM,EAAK,OAAQ,EAAK,OAAQ,EAAK,IAAK,EAAK,OAAQ,EAAK,OACjE,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,MACrE,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,QACpE,EAAK,MAAO,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,SACpE,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,KAAM,EAAK,KAAM,EAAK,MACjE,EAAK,IAAK,EAAK,IAAA,EAEjB,GAAM,CACJ,EAAK,QAAS,EAAK,OAAQ,EAAK,QAAS,EAAK,KAAM,EAAK,MAAO,EAAK,OACrE,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,MAAO,EAAK,KAAM,EAAK,QACjE,EAAK,QAAS,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,QAAS,EAAK,MACzE,EAAK,QAAS,EAAK,MAAO,EAAK,OAAQ,EAAK,QAAS,EAAK,OAAQ,EAAK,OACvE,EAAK,OAAQ,EAAK,IAAK,EAAK,QAAS,EAAK,QAAS,EAAK,QAAS,EAAK,QACtE,EAAK,OAAQ,EAAK,QAAS,EAAK,QAAS,EAAK,OAAQ,EAAK,IAAK,EAAK,QACrE,EAAK,MAAO,EAAK,QAAS,EAAK,QAAS,EAAK,OAAQ,EAAK,OAAQ,EAAK,QACvE,EAAK,OAAQ,EAAK,MAAO,EAAK,QAAS,EAAK,KAAM,EAAK,OAAQ,EAAK,OACpE,IAAK,KAAM,IAAK,QAAS,IAAK,SAAU,EAAK,QAAS,IAAK,SAC3D,IAAK,SAAU,IAAK,QAAA,EAEtB,GAAM,CACJ,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,KAAM,EAAK,MACpE,EAAK,MAAO,EAAK,MAAO,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,OACpE,EAAK,MAAO,EAAK,OAAQ,EAAK,IAAK,EAAK,KAAM,EAAK,IAAK,EAAK,MAC7D,EAAK,KAAM,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,MAAO,EAAK,MAChE,EAAK,OAAQ,EAAK,MAAA,EAEpB,GAAM,CACJ,EAAK,MAAO,EAAK,OAAQ,EAAK,MAAO,EAAK,QAAS,EAAK,QACxD,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,OAAQ,EAAK,MACzD,EAAK,IAAK,EAAK,QAAS,EAAK,QAAS,EAAK,KAAM,EAAK,OACtD,EAAK,OAAQ,EAAK,OAAQ,EAAK,QAAS,EAAK,QAAS,EAAK,OAC3D,EAAK,KAAM,EAAK,OAAQ,EAAK,MAAO,EAAK,OAAQ,EAAK,MACtD,EAAK,MAAO,EAAK,OAAQ,EAAK,QAAS,EAAK,QAAS,EAAK,QAC1D,EAAK,QAAS,EAAK,KAAM,IAAK,QAAS,IAAK,KAAM,IAAK,QACvD,IAAK,OAAQ,IAAK,QAAS,IAAK,OAAQ,EAAK,IAAK,EAAK,OACvD,EAAK,QAAS,EAAK,MAAO,EAAK,QAAS,IAAK,MAAO,IAAK,OACzD,IAAK,QAAS,IAAK,QAAS,IAAK,QAAS,IAAK,QAAS,IAAK,QAC7D,EAAK,QAAS,EAAK,OAAA,CAEvB,EAEMC,EAAiBC,IAAsB,CAC3C,GAAGF,EACH,EAAKA,EAAeE,EAAQ,QAAQ,EACpC,EAAK,CACH,GAAGF,EAAe,CAAG,EACrB,CAACE,EAAQ,SAAS,EAAGA,EAAQ,KAAA,CAEjC,GAEMC,EAAsB,CAACD,EAAkBE,IAAyB,CACtE,MAAMC,EAAqB,CAAA,EACrBC,EAAaL,EAAcC,CAAO,EACxC,UAAWK,KAAOD,EAAY,CAC5BD,EAAOE,CAAG,EAAI,CAAA,EACd,MAAMC,EAAUF,EAAWC,CAA8B,EACzD,GAAIC,EACF,UAAWC,KAAOD,EAChBH,EAAOE,CAAG,EAAEE,CAAG,EAAID,EAAQC,CAAG,EAAE,QAAQ,KAAMP,EAAQ,GAAG,EAAE,QAAQ,KAAMA,EAAQ,IAAI,CAG3F,CACA,OAAKE,GACH,OAAOC,EAAO,CAAG,EAEZA,CACT,EAEMK,EAAkBR,GAAqB,CAC3C,MAAMS,EAAkC,CAAA,EAClCC,EAAmBT,EAAoBD,EAAS,EAAI,EAC1D,UAAWK,KAAOK,EAChB,UAAWH,KAAOG,EAAiBL,CAAG,EAChC,OAAOI,EAAQC,EAAiBL,CAAG,EAAEE,CAAG,CAAC,EAAM,MACjDE,EAAQC,EAAiBL,CAAG,EAAEE,CAAG,CAAC,EAAIA,GAI5C,OAAOE,CACT,ECvIME,EAAa,CAACC,EAAyB,MAClB,CACvB,GAAGA,EACH,KAAMA,EAAK,MAAQ,IACnB,IAAKA,EAAK,KAAO,IACjB,MAAOA,EAAK,OAAS,IACrB,UAAWA,EAAK,WAAa,IAC7B,QAASA,EAAK,SAAW,IACzB,SAAUA,EAAK,UAAY,EAC3B,IAAKA,EAAK,IACV,KAAMA,EAAK,MAAQ,IACnB,OAAQA,EAAK,QAAUA,EAAK,MAAQ,IACpC,OAAQA,EAAK,QAAU,IACvB,WAAY,CACV,GAAGA,EAAK,WACR,KAAMA,EAAK,YAAY,MAAQ,OAC/B,UAAWA,EAAK,YAAY,WAAa,IACzC,QAASA,EAAK,YAAY,SAAW,IAAA,CACvC,GCjBEC,EAAc,MACdC,EAAW,EACXC,EAAkB,GAGlBC,EAAe,EACfC,EAAgB,EAChBC,EAAsB,EACtBC,EAAsB,EACtBC,EAAW,EAGXC,EAAmB,GAKnBC,EAAiB,CAACC,EAAeX,EAAeY,EAAc,IAAmB,CACrF,MAAMC,EAAwB,CAAA,EAC9B,GAAI,CAAE,KAAAC,EAAM,OAAAC,CAAA,EAAWf,EACnBgB,EAAO,EAEPhB,EAAK,MAEPc,EAAOC,EAAS,IAAMf,EAAK,IAAMS,IAGnCI,EAAQ,KAAK,CAAC,EAAGG,CAAI,CAAC,EAEtB,MAAMC,EAAY,CAACC,EAAmBC,EAAkBC,EAAU,KAAS,CACzEP,EAAQ,KAAK,CAACK,EAAWN,EAAcI,CAAI,CAAC,EAC5CA,GAAQG,GAAYC,EAAUN,EAAOC,EACvC,EAEMM,EAAQF,GAAqBF,EAAUjB,EAAK,OAAS,IAAOmB,CAAQ,EACpEG,EAAWH,GAAqBF,EAAU,EAAGE,CAAQ,EACrDI,EAAOJ,GAAqBF,EAAU,EAAGE,EAAU,EAAK,EAE9D,QAASK,EAAI,EAAGC,EAAe,GAAOD,GAAKb,EAAM,OAAQa,IAAK,CAC5D,MAAME,EAAOf,EAAMa,CAAC,EACdG,EAAWhB,EAAMa,EAAI,CAAC,EACtBI,EAAWjB,EAAMa,EAAI,CAAC,EAExBE,IAAS1B,EAAK,OAChBuB,EAAIf,CAAQ,EACZiB,EAAe,IACNC,IAAS1B,EAAK,KACnByB,KAAsBnB,CAAmB,EAC7Ce,EAAKjB,CAAY,EACjBqB,EAAe,IACNC,IAAS1B,EAAK,MACnByB,KAAsBnB,CAAmB,EAC7Ce,EAAKhB,CAAa,EAClBoB,EAAe,IAEfE,IAAa,QAAaA,IAAa3B,EAAK,OAC5C4B,IAAa,QAAaA,IAAa5B,EAAK,QAG5CuB,EAAIhB,CAAmB,EACvBkB,EAAe,GAEnB,CAEA,MAAO,CAACZ,EAASG,CAAI,CACvB,EAMMa,EAAY,CAACC,EAAoBC,IAAoC,CACzE,MAAMC,EAAiB7B,EAAkB,EACnC8B,EAAa/B,EAAW8B,EACxBE,EAAWJ,EAAaG,EACxBE,EAAWJ,EAAQ,OAASC,EAC5BI,EAAa,GAAKD,EAElBE,EAAS,IAAI,YAAYD,CAAU,EACnCE,EAAO,IAAI,SAASD,CAAM,EAE1BE,EAAc,CAACC,EAAgBC,IAAiB,CACpD,QAASjB,EAAI,EAAGA,EAAIiB,EAAK,OAAQjB,IAC/Bc,EAAK,SAASE,EAAShB,EAAGiB,EAAK,WAAWjB,CAAC,CAAC,CAEhD,EAEMkB,EAAkB,CAACF,EAAgBG,IAAwB,CAC/D,QAASnB,EAAI,EAAGA,EAAImB,EAAM,OAAQnB,IAAKgB,GAAUR,EAAgB,CAC/D,MAAMY,EAAS,KAAK,IAAI,GAAI,KAAK,IAAI,EAAGD,EAAMnB,CAAC,CAAC,CAAC,EAC3CqB,EAAQD,EAAS,EAAIA,EAAS,MAASA,EAAS,MACtDN,EAAK,SAASE,EAAQK,EAAO,EAAI,CACnC,CACF,EAGA,OAAAN,EAAY,EAAG,MAAM,EACrBD,EAAK,UAAU,EAAGF,EAAa,EAAG,EAAI,EACtCG,EAAY,EAAG,MAAM,EAGrBA,EAAY,GAAI,MAAM,EACtBD,EAAK,UAAU,GAAI,GAAI,EAAI,EAC3BA,EAAK,UAAU,GAAI,EAAG,EAAI,EAC1BA,EAAK,UAAU,GAAIpC,EAAU,EAAI,EACjCoC,EAAK,UAAU,GAAIR,EAAY,EAAI,EACnCQ,EAAK,UAAU,GAAIJ,EAAU,EAAI,EACjCI,EAAK,UAAU,GAAIL,EAAY,EAAI,EACnCK,EAAK,UAAU,GAAInC,EAAiB,EAAI,EAGxCoC,EAAY,GAAI,MAAM,EACtBD,EAAK,UAAU,GAAIH,EAAU,EAAI,EACjCO,EAAgB,GAAIX,CAAO,EAEpBO,CACT,EAEMQ,EAAQ,CAACnC,EAAevB,IAAkC,CAC9D,MAAM2D,EAAoB,OAAO,cAAiB,OAAe,mBAC3DC,EAA2B,OAAO,qBAAwB,OAAe,0BAE/E,GAAI,CAACD,GAAqB,CAACC,EACzB,MAAM,IAAI,MAAM,yGAAyG,EAG3H,MAAMC,EAAU,IAAIF,EACd,CAACG,EAAYC,CAAS,EAAIzC,EAAeC,EAAOvB,CAAO,EACvDgE,EAAe,KAAK,KAAKnD,EAAckD,CAAS,EAChDE,EAAiB,IAAIL,EAAyB9C,EAAUkD,EAAcnD,CAAW,EAEjFqD,EAAaD,EAAe,iBAAA,EAC5BE,EAAWF,EAAe,WAAA,EAEhCC,EAAW,KAAOlE,EAAQ,WAAW,KACrCkE,EAAW,UAAU,MAAQlE,EAAQ,WAAW,WAAa,IAE7D8D,EAAW,QAAQ,CAAC,CAACL,EAAO7B,CAAI,IAAM,CACpCuC,EAAS,KAAK,eAAeV,EAAO7B,CAAI,CAC1C,CAAC,EAEDsC,EAAW,QAAQC,CAAQ,EAC3BA,EAAS,QAAQF,EAAe,WAAW,EAG3C,IAAIG,EAAuC,KACvCC,EAAqC,KACrCC,EAAoB,QACpBC,EAAW,EACXC,EAAY,EACZC,EAAyB,KAE7B,MAAMC,EAAsB1E,EAAQ,QAAU,CAAA,EAG1CA,EAAQ,WAAW,SAAW,CAAC0E,EAAO,UACxCA,EAAO,QAAU1E,EAAQ,WAAW,SAItC,MAAM2E,EAAS,IAAI,QAAc,CAACC,EAASC,IAAW,CACpDX,EAAW,MAAM,CAAC,EAClBD,EAAe,eAAA,EACfA,EAAe,WAAca,GAAM,CACjC,GAAI,CACFT,EAAiBS,EAAE,eACnBR,EAAQ,QACRI,EAAO,UAAA,EACPE,EAAA,CACF,OAASG,EAAK,CACZF,EAAOE,CAAG,CACZ,CACF,EACAd,EAAe,iBAAiB,QAAUc,GAAQ,CAChDF,EAAOE,CAAG,CACZ,CAAC,CACH,CAAC,EAGKC,EAAe,IAA6B,CAChD,MAAMC,EAAYpB,EAAQ,mBAAA,EAC1B,OAAAoB,EAAU,OAASZ,EACnBY,EAAU,QAAQpB,EAAQ,WAAW,EACrCoB,EAAU,QAAU,IAAM,CACxB,MAAMzD,EAAc0D,EAAA,EAEhBZ,IAAU,WAAa9C,GAAeuC,EAAY,MACpDO,EAAQ,UACRC,EAAW,EACXG,EAAO,UAAA,EAEX,EACOO,CACT,EAEME,EAAO,SAAY,CASvB,GARA,MAAMR,EAGFd,EAAQ,QAAU,aACpB,MAAMA,EAAQ,OAAA,EAIZS,IAAU,UACZ,QAIE,CAACF,GAAUA,EAAO,SAAW,QAC/BA,EAASY,EAAA,GAIXZ,EAAO,MAAMP,EAAQ,YAAaU,CAAQ,EAC1CC,EAAYX,EAAQ,YAAcU,EAClCD,EAAQ,UACRI,EAAO,YAAA,EAGP,MAAMU,GAAiBrB,EAAYQ,GAAY,IAC/CE,EAAU,OAAO,WAAW,IAAM,CAC5BH,IAAU,WACZe,EAAA,CAEJ,EAAGD,CAAa,CAClB,EAEME,EAAQ,IAAM,CACdhB,IAAU,YAIVG,IAAY,OACd,aAAaA,CAAO,EACpBA,EAAU,MAGZF,EAAW,KAAK,IAAIV,EAAQ,YAAcW,EAAWT,CAAS,EAE1DK,IACFA,EAAO,KAAK,CAAC,EACbA,EAAS,MAGXE,EAAQ,SACRI,EAAO,WAAA,EACT,EAEMW,EAAO,CAACE,EAAU,KAAU,CAMhC,GALId,IAAY,OACd,aAAaA,CAAO,EACpBA,EAAU,MAGRL,EAAQ,CACV,GAAI,CACFA,EAAO,KAAK,CAAC,CACf,MAAY,CAEZ,CACAA,EAAS,IACX,CAEA,MAAMoB,EAAalB,IAAU,UAC7BA,EAAQ,UACRC,EAAW,EACXC,EAAY,EAERgB,GACFd,EAAO,YAAA,EAGLa,IACFlB,EAAiB,KAErB,EAEMoB,EAAO,MAAO7D,GAAiB,CACnC,MAAM4D,EAAalB,IAAU,UACvBoB,EAAc,KAAK,IAAI,EAAG,KAAK,IAAI9D,EAAMmC,CAAS,CAAC,EAGzD,GAAIK,EAAQ,CACNK,IAAY,OACd,aAAaA,CAAO,EACpBA,EAAU,MAEZ,GAAI,CACFL,EAAO,KAAK,CAAC,CACf,MAAY,CAEZ,CACAA,EAAS,IACX,CAEAG,EAAWmB,EACXhB,EAAO,WAAWgB,CAAW,EAGzBF,IACFlB,EAAQ,SACR,MAAMa,EAAA,EAEV,EAEMI,GAAU,IAAM,CACpBF,EAAK,EAAI,EACLxB,EAAQ,QAAU,UACpBA,EAAQ,MAAA,CAEZ,EAEMqB,EAAiB,IACjBZ,IAAU,UACL,KAAK,IAAIT,EAAQ,YAAcW,EAAWT,CAAS,EAErDQ,EAGHoB,GAAe,IACZ5B,EAGH6B,GAAW,IACRtB,EAGHuB,EAAc,SAA2B,CAE7C,GADA,MAAMlB,EACF,CAACN,EACH,MAAM,IAAI,MAAM,4BAA4B,EAE9C,MAAMyB,EAAWrD,EAAUwB,EAAe,WAAYI,EAAe,eAAe,CAAC,CAAC,EAEhF0B,EAAa,IAAI,WAAWD,EAAS,UAAU,EACrD,QAAS1D,EAAI,EAAGA,EAAI0D,EAAS,WAAY1D,IACvC2D,EAAW3D,CAAC,EAAI0D,EAAS,SAAS1D,CAAC,EAErC,OAAO,IAAI,KAAK,CAAC2D,CAAU,EAAG,CAAE,KAAM,YAAa,CACrD,EAEMC,EAAa,SAAY,CAC7B,MAAMC,EAAY,MAAMJ,EAAA,EACxB,OAAO,IAAI,gBAAgBI,CAAS,CACtC,EAWA,MAAO,CAEL,KAAAd,EACA,MAAAG,EACA,KAAAD,EACA,KAAAI,EACA,QAAAF,GAGA,eAAAL,EACA,aAAAS,GACA,SAAAC,GAGA,YAAAC,EACA,WAAAG,EACA,WAzBiB,MAAOE,EAAmB,cAAgB,CAC3D,MAAMC,EAAU,MAAMH,EAAA,EAChBI,EAAS,SAAS,cAAc,GAAG,EACzCA,EAAO,KAAOD,EACdC,EAAO,OAAS,SAChBA,EAAO,SAAWF,EAClBE,EAAO,MAAA,CACT,EAqBE,QAAAvC,EACA,WAAAK,EACA,SAAAC,CAAA,CAEJ,ECzXakC,EAAS,CAAChD,EAAczC,IAAoC,CACvE,MAAMZ,EAAUW,EAAWC,CAAI,EACzBR,EAAaL,EAAcC,CAAO,EACxC,MAAO,CAAC,GAAGqD,EAAK,QAAQ,OAAQrD,EAAQ,SAAS,EAAE,KAAA,EAAO,kBAAA,CAAmB,EAC1E,IAAKsG,GAAc,CAClB,UAAWjG,KAAOD,EAAY,CAC5B,MAAME,EAAUF,EAAWC,CAA8B,EACzD,GAAIC,GAAWA,EAAQgG,CAAS,EAC9B,OAAOhG,EAAQgG,CAAS,CAE5B,CACA,OAAOtG,EAAQ,OACjB,CAAC,EACA,KAAKA,EAAQ,SAAS,EACtB,QAAQ,KAAMA,EAAQ,GAAG,EACzB,QAAQ,KAAMA,EAAQ,IAAI,CAC/B,EAEauG,EAAS,CAAChF,EAAeX,IAAoC,CACxE,MAAMZ,EAAUW,EAAWC,CAAI,EACzBH,EAAUD,EAAeR,CAAO,EACtC,OAAOuB,EACJ,QAAQ,OAAQvB,EAAQ,SAAS,EACjC,OACA,MAAMA,EAAQ,SAAS,EACvB,IAAKI,GACA,OAAOK,EAAQL,CAAU,EAAM,IAC1BK,EAAQL,CAAU,EAEpBJ,EAAQ,OAChB,EACA,KAAK,EAAE,CACZ,EAEaI,EAAa,CAACJ,EAA4BE,EAAuB,KACrED,EAAoBU,EAAWX,CAAO,EAAGE,CAAW,EAGhDwD,EAAQ,CAACL,EAAczC,EAAyB4F,IAAsC,CACjG,MAAMjF,EAAQiF,GAAeH,EAAOhD,EAAMzC,CAAI,EACxCZ,EAAUW,EAAWC,CAAI,EAC/B,OAAO6F,EAASlF,EAAOvB,CAAO,CAChC,EAKA0G,EAAe,CACb,OAAAL,EACA,OAAAE,EACA,WAAAnG,EACA,MAAAsD,CACF"}